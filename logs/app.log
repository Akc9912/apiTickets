2025-08-11 09:02:44 - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=10h7m15s996ms333µs600ns).
2025-08-11 14:39:59 - Starting MiapiApplication using Java 24.0.2 with PID 4820 (C:\Users\seba\Desktop\finalPOO\apiTickets\target\classes started by seba in C:\Users\seba\Desktop\finalPOO\apiTickets)
2025-08-11 14:39:59 - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-08-11 14:39:59 - The following 1 profile is active: "mysql"
2025-08-11 14:40:02 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-11 14:40:02 - Finished Spring Data repository scanning in 152 ms. Found 9 JPA repository interfaces.
2025-08-11 14:40:04 - Tomcat initialized with port 8080 (http)
2025-08-11 14:40:04 - Starting service [Tomcat]
2025-08-11 14:40:04 - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-08-11 14:40:04 - Initializing Spring embedded WebApplicationContext
2025-08-11 14:40:04 - Root WebApplicationContext: initialization completed in 4653 ms
2025-08-11 14:40:05 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-11 14:40:05 - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-08-11 14:40:05 - HHH000026: Second-level cache disabled
2025-08-11 14:40:06 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-11 14:40:06 - HikariPool-1 - Starting...
2025-08-11 14:40:06 - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1818d00b
2025-08-11 14:40:06 - HikariPool-1 - Start completed.
2025-08-11 14:40:06 - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-11 14:40:06 - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-11 14:40:06 - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-11 14:40:08 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-11 14:40:08 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-11 14:40:09 - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-11 14:40:09 - Filter 'jwtAuthenticationFilter' configured for use
2025-08-11 14:40:11 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-08-11 14:40:11 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-11 14:40:12 - Exposing 14 endpoints beneath base path '/actuator'
2025-08-11 14:40:12 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-11 14:40:13 - Tomcat started on port 8080 (http) with context path '/'
2025-08-11 14:40:13 - Started MiapiApplication in 14.886 seconds (process running for 15.792)
2025-08-11 14:40:13 - [DataInitializer] Inicio de configuración inicial de datos
2025-08-11 14:40:13 - [DataInitializer] Verificando si existe SuperAdmin
2025-08-11 14:40:14 - [DataInitializer] SuperAdmin ya existe
2025-08-11 14:40:14 - [DataInitializer] Verificando si existe Admin
2025-08-11 14:40:14 - [DataInitializer] Admin ya existe
2025-08-11 14:40:14 - [DataInitializer] Verificando si existe Tecnico
2025-08-11 14:40:14 - [DataInitializer] Tecnico ya existe
2025-08-11 14:40:14 - [DataInitializer] Verificando si existe Trabajador
2025-08-11 14:40:14 - [DataInitializer] Trabajador ya existe
2025-08-11 14:40:14 - [DataInitializer] Usuarios totales: 6
2025-08-11 14:40:14 - [DataInitializer] Configuración inicial completada
2025-08-11 14:40:14 - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-11 14:40:14 - Initializing Servlet 'dispatcherServlet'
2025-08-11 14:40:14 - Completed initialization in 1 ms
2025-08-11 14:46:29 - Securing OPTIONS /api/auth/login
2025-08-11 14:46:29 - Securing POST /api/auth/login
2025-08-11 14:46:29 - [JWT Filter] Método: POST Endpoint: /api/auth/login
2025-08-11 14:46:29 - No se encontró el header Authorization o no es Bearer. Request: POST /api/auth/login
2025-08-11 14:46:29 - Secured POST /api/auth/login
2025-08-11 14:46:29 - [AuthController] POST /login datos: com.poo.miapi.dto.auth.LoginRequestDto@2dace7d0
2025-08-11 14:46:29 - [AuthController] Respuesta: com.poo.miapi.dto.auth.LoginResponseDto@2eeb6637
2025-08-11 14:46:29 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 14:46:29 - Securing OPTIONS /api/admin/usuarios
2025-08-11 14:46:29 - Securing OPTIONS /api/admin/usuarios
2025-08-11 14:46:29 - Securing GET /api/admin/usuarios
2025-08-11 14:46:29 - [JWT Filter] Método: GET Endpoint: /api/admin/usuarios
2025-08-11 14:46:29 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbkBzaXN0ZW1hLmNvbSIsImlkIjoyLCJyb2wiOiJBRE1JTiIsImlhdCI6MTc1NDkzNDM4OSwiZXhwIjoxNzU0OTcwMzg5fQ.kxgQZPE3b3849k5seDeshvOLLPNyxrAGJCzjlbbpXyI
2025-08-11 14:46:29 - Email extraído del token: admin@sistema.com
2025-08-11 14:46:29 - Authentication actual en SecurityContext: null
2025-08-11 14:46:29 - [JWT Filter] Usuario autenticado: admin@sistema.com Rol: ADMIN
2025-08-11 14:46:29 - Token válido para usuario: admin@sistema.com
2025-08-11 14:46:29 - Secured GET /api/admin/usuarios
2025-08-11 14:46:29 - [AdminController] GET /usuarios
2025-08-11 14:46:30 - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.orm.jpa.JpaSystemException: Unrecognized discriminator value: SUPERADMIN] with root cause
org.hibernate.HibernateException: Unrecognized discriminator value: SUPERADMIN
	at org.hibernate.metamodel.mapping.MappedDiscriminatorConverter.getDetailsForDiscriminatorValue(MappedDiscriminatorConverter.java:135)
	at org.hibernate.metamodel.mapping.DiscriminatorMapping.resolveDiscriminatorValue(DiscriminatorMapping.java:44)
	at org.hibernate.sql.results.graph.entity.internal.EntityInitializerImpl.determineConcreteEntityDescriptor(EntityInitializerImpl.java:875)
	at org.hibernate.sql.results.graph.entity.internal.EntityInitializerImpl.resolveEntityKey(EntityInitializerImpl.java:709)
	at org.hibernate.sql.results.graph.entity.internal.EntityInitializerImpl.resolveKey(EntityInitializerImpl.java:584)
	at org.hibernate.sql.results.graph.entity.internal.EntityInitializerImpl.resolveKey(EntityInitializerImpl.java:457)
	at org.hibernate.sql.results.graph.entity.internal.EntityInitializerImpl.resolveKey(EntityInitializerImpl.java:97)
	at org.hibernate.sql.results.internal.StandardRowReader.coordinateInitializers(StandardRowReader.java:235)
	at org.hibernate.sql.results.internal.StandardRowReader.readRow(StandardRowReader.java:141)
	at org.hibernate.sql.results.spi.ListResultsConsumer.read(ListResultsConsumer.java:249)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:201)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:35)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:224)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll(SimpleJpaRepository.java:404)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:734)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy162.findAll(Unknown Source)
	at com.poo.miapi.service.core.AdminService.listarTodosLosUsuarios(AdminService.java:177)
	at com.poo.miapi.controller.core.AdminController.listarUsuarios(AdminController.java:58)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.poo.miapi.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-08-11 14:46:30 - Securing GET /error
2025-08-11 14:46:30 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 14:46:30 - Saved request http://localhost:8080/error?continue to session
2025-08-11 14:46:30 - Pre-authenticated entry point called. Rejecting access
2025-08-11 14:46:30 - Securing GET /api/admin/usuarios
2025-08-11 14:46:30 - [JWT Filter] Método: GET Endpoint: /api/admin/usuarios
2025-08-11 14:46:30 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbkBzaXN0ZW1hLmNvbSIsImlkIjoyLCJyb2wiOiJBRE1JTiIsImlhdCI6MTc1NDkzNDM4OSwiZXhwIjoxNzU0OTcwMzg5fQ.kxgQZPE3b3849k5seDeshvOLLPNyxrAGJCzjlbbpXyI
2025-08-11 14:46:30 - Email extraído del token: admin@sistema.com
2025-08-11 14:46:30 - Authentication actual en SecurityContext: null
2025-08-11 14:46:30 - [JWT Filter] Usuario autenticado: admin@sistema.com Rol: ADMIN
2025-08-11 14:46:30 - Token válido para usuario: admin@sistema.com
2025-08-11 14:46:30 - Secured GET /api/admin/usuarios
2025-08-11 14:46:30 - [AdminController] GET /usuarios
2025-08-11 14:46:30 - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.orm.jpa.JpaSystemException: Unrecognized discriminator value: SUPERADMIN] with root cause
org.hibernate.HibernateException: Unrecognized discriminator value: SUPERADMIN
	at org.hibernate.metamodel.mapping.MappedDiscriminatorConverter.getDetailsForDiscriminatorValue(MappedDiscriminatorConverter.java:135)
	at org.hibernate.metamodel.mapping.DiscriminatorMapping.resolveDiscriminatorValue(DiscriminatorMapping.java:44)
	at org.hibernate.sql.results.graph.entity.internal.EntityInitializerImpl.determineConcreteEntityDescriptor(EntityInitializerImpl.java:875)
	at org.hibernate.sql.results.graph.entity.internal.EntityInitializerImpl.resolveEntityKey(EntityInitializerImpl.java:709)
	at org.hibernate.sql.results.graph.entity.internal.EntityInitializerImpl.resolveKey(EntityInitializerImpl.java:584)
	at org.hibernate.sql.results.graph.entity.internal.EntityInitializerImpl.resolveKey(EntityInitializerImpl.java:457)
	at org.hibernate.sql.results.graph.entity.internal.EntityInitializerImpl.resolveKey(EntityInitializerImpl.java:97)
	at org.hibernate.sql.results.internal.StandardRowReader.coordinateInitializers(StandardRowReader.java:235)
	at org.hibernate.sql.results.internal.StandardRowReader.readRow(StandardRowReader.java:141)
	at org.hibernate.sql.results.spi.ListResultsConsumer.read(ListResultsConsumer.java:249)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:201)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:35)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:224)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:102)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.executeQuery(JdbcSelectExecutor.java:91)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:165)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$1(ConcreteSqmSelectQueryPlan.java:152)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:442)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:380)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:143)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll(SimpleJpaRepository.java:404)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:734)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy162.findAll(Unknown Source)
	at com.poo.miapi.service.core.AdminService.listarTodosLosUsuarios(AdminService.java:177)
	at com.poo.miapi.controller.core.AdminController.listarUsuarios(AdminController.java:58)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at com.poo.miapi.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:114)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-08-11 14:46:30 - Securing GET /error
2025-08-11 14:46:30 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 14:46:30 - Saved request http://localhost:8080/error?continue to session
2025-08-11 14:46:30 - Pre-authenticated entry point called. Rejecting access
2025-08-11 14:49:27 - Starting MiapiApplication using Java 24.0.2 with PID 6328 (C:\Users\seba\Desktop\finalPOO\apiTickets\target\classes started by seba in C:\Users\seba\Desktop\finalPOO\apiTickets)
2025-08-11 14:49:27 - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-08-11 14:49:27 - The following 1 profile is active: "mysql"
2025-08-11 14:49:29 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-11 14:49:29 - Finished Spring Data repository scanning in 113 ms. Found 9 JPA repository interfaces.
2025-08-11 14:49:31 - Tomcat initialized with port 8080 (http)
2025-08-11 14:49:31 - Starting service [Tomcat]
2025-08-11 14:49:31 - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-08-11 14:49:31 - Initializing Spring embedded WebApplicationContext
2025-08-11 14:49:31 - Root WebApplicationContext: initialization completed in 3784 ms
2025-08-11 14:49:32 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-11 14:49:32 - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-08-11 14:49:32 - HHH000026: Second-level cache disabled
2025-08-11 14:49:33 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-11 14:49:33 - HikariPool-1 - Starting...
2025-08-11 14:49:33 - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@36f05595
2025-08-11 14:49:33 - HikariPool-1 - Start completed.
2025-08-11 14:49:33 - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-11 14:49:33 - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-11 14:49:33 - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-11 14:49:35 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-11 14:49:37 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-11 14:49:38 - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-11 14:49:38 - Filter 'jwtAuthenticationFilter' configured for use
2025-08-11 14:49:40 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-08-11 14:49:40 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-11 14:49:41 - Exposing 14 endpoints beneath base path '/actuator'
2025-08-11 14:49:41 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-11 14:49:42 - Tomcat started on port 8080 (http) with context path '/'
2025-08-11 14:49:42 - Started MiapiApplication in 15.53 seconds (process running for 16.388)
2025-08-11 14:49:42 - [DataInitializer] Inicio de configuración inicial de datos
2025-08-11 14:49:42 - [DataInitializer] Verificando si existe SuperAdmin
2025-08-11 14:49:42 - [DataInitializer] Creando SuperAdmin...
2025-08-11 14:49:42 - [DataInitializer] SuperAdmin creado: superadmin@sistema.com
2025-08-11 14:49:42 - [DataInitializer] Verificando si existe Admin
2025-08-11 14:49:42 - [DataInitializer] Creando Admin...
2025-08-11 14:49:42 - [DataInitializer] Admin creado: admin@sistema.com
2025-08-11 14:49:42 - [DataInitializer] Verificando si existe Tecnico
2025-08-11 14:49:42 - [DataInitializer] Creando Tecnico...
2025-08-11 14:49:42 - [DataInitializer] Tecnico creado: tecnico@sistema.com
2025-08-11 14:49:42 - [DataInitializer] Verificando si existe Trabajador
2025-08-11 14:49:42 - [DataInitializer] Creando Trabajador...
2025-08-11 14:49:42 - [DataInitializer] Trabajador creado: trabajador@sistema.com
2025-08-11 14:49:42 - [DataInitializer] Usuarios totales: 4
2025-08-11 14:49:42 - [DataInitializer] Configuración inicial completada
2025-08-11 14:49:45 - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-11 14:49:45 - Initializing Servlet 'dispatcherServlet'
2025-08-11 14:49:45 - Completed initialization in 1 ms
2025-08-11 14:50:09 - Securing OPTIONS /api/admin/usuarios
2025-08-11 14:50:09 - Securing OPTIONS /api/admin/usuarios
2025-08-11 14:50:09 - Securing GET /api/admin/usuarios
2025-08-11 14:50:09 - [JWT Filter] Método: GET Endpoint: /api/admin/usuarios
2025-08-11 14:50:10 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbkBzaXN0ZW1hLmNvbSIsImlkIjoyLCJyb2wiOiJBRE1JTiIsImlhdCI6MTc1NDkzNDM4OSwiZXhwIjoxNzU0OTcwMzg5fQ.kxgQZPE3b3849k5seDeshvOLLPNyxrAGJCzjlbbpXyI
2025-08-11 14:50:10 - Email extraído del token: admin@sistema.com
2025-08-11 14:50:10 - Authentication actual en SecurityContext: null
2025-08-11 14:50:10 - [JWT Filter] Usuario autenticado: admin@sistema.com Rol: ADMIN
2025-08-11 14:50:10 - Token válido para usuario: admin@sistema.com
2025-08-11 14:50:10 - Secured GET /api/admin/usuarios
2025-08-11 14:50:10 - [AdminController] GET /usuarios
2025-08-11 14:50:10 - [AdminController] Respuesta: [com.poo.miapi.dto.usuarios.UsuarioResponseDto@4c9b431e, com.poo.miapi.dto.usuarios.AdminResponseDto@2a47efab, com.poo.miapi.dto.usuarios.TecnicoResponseDto@6d568f70, com.poo.miapi.dto.usuarios.TrabajadorResponseDto@a4ad063]
2025-08-11 14:50:10 - Securing GET /api/admin/usuarios
2025-08-11 14:50:10 - [JWT Filter] Método: GET Endpoint: /api/admin/usuarios
2025-08-11 14:50:10 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbkBzaXN0ZW1hLmNvbSIsImlkIjoyLCJyb2wiOiJBRE1JTiIsImlhdCI6MTc1NDkzNDM4OSwiZXhwIjoxNzU0OTcwMzg5fQ.kxgQZPE3b3849k5seDeshvOLLPNyxrAGJCzjlbbpXyI
2025-08-11 14:50:10 - Email extraído del token: admin@sistema.com
2025-08-11 14:50:10 - Authentication actual en SecurityContext: null
2025-08-11 14:50:10 - [JWT Filter] Usuario autenticado: admin@sistema.com Rol: ADMIN
2025-08-11 14:50:10 - Token válido para usuario: admin@sistema.com
2025-08-11 14:50:10 - Secured GET /api/admin/usuarios
2025-08-11 14:50:10 - [AdminController] GET /usuarios
2025-08-11 14:50:10 - [AdminController] Respuesta: [com.poo.miapi.dto.usuarios.UsuarioResponseDto@1b787904, com.poo.miapi.dto.usuarios.AdminResponseDto@14ab98f7, com.poo.miapi.dto.usuarios.TecnicoResponseDto@6aeab3ac, com.poo.miapi.dto.usuarios.TrabajadorResponseDto@3dea21e1]
2025-08-11 14:50:41 - Securing OPTIONS /api/auth/login
2025-08-11 14:50:41 - Securing POST /api/auth/login
2025-08-11 14:50:41 - [JWT Filter] Método: POST Endpoint: /api/auth/login
2025-08-11 14:50:41 - No se encontró el header Authorization o no es Bearer. Request: POST /api/auth/login
2025-08-11 14:50:41 - Secured POST /api/auth/login
2025-08-11 14:50:41 - [AuthController] POST /login datos: com.poo.miapi.dto.auth.LoginRequestDto@44d472b8
2025-08-11 14:50:41 - [AuthController] Respuesta: com.poo.miapi.dto.auth.LoginResponseDto@4a177ad9
2025-08-11 14:50:41 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 14:51:33 - Securing OPTIONS /api/usuarios
2025-08-11 14:51:33 - Securing POST /api/usuarios
2025-08-11 14:51:33 - [JWT Filter] Método: POST Endpoint: /api/usuarios
2025-08-11 14:51:33 - No se encontró el header Authorization o no es Bearer. Request: POST /api/usuarios
2025-08-11 14:51:33 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 14:51:33 - Saved request http://localhost:8080/api/usuarios?continue to session
2025-08-11 14:51:33 - Pre-authenticated entry point called. Rejecting access
2025-08-11 14:51:33 - Securing POST /error
2025-08-11 14:51:33 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 14:51:33 - Saved request http://localhost:8080/error?continue to session
2025-08-11 14:51:33 - Pre-authenticated entry point called. Rejecting access
2025-08-11 14:59:56 - Securing OPTIONS /api/usuarios
2025-08-11 14:59:56 - Securing POST /api/usuarios
2025-08-11 14:59:56 - [JWT Filter] Método: POST Endpoint: /api/usuarios
2025-08-11 14:59:56 - No se encontró el header Authorization o no es Bearer. Request: POST /api/usuarios
2025-08-11 14:59:56 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 14:59:56 - Saved request http://localhost:8080/api/usuarios?continue to session
2025-08-11 14:59:56 - Pre-authenticated entry point called. Rejecting access
2025-08-11 14:59:56 - Securing POST /error
2025-08-11 14:59:56 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 14:59:56 - Saved request http://localhost:8080/error?continue to session
2025-08-11 14:59:56 - Pre-authenticated entry point called. Rejecting access
2025-08-11 15:12:52 - Securing OPTIONS /api/usuarios
2025-08-11 15:12:52 - Securing POST /api/usuarios
2025-08-11 15:12:52 - [JWT Filter] Método: POST Endpoint: /api/usuarios
2025-08-11 15:12:52 - No se encontró el header Authorization o no es Bearer. Request: POST /api/usuarios
2025-08-11 15:12:52 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 15:12:52 - Saved request http://localhost:8080/api/usuarios?continue to session
2025-08-11 15:12:52 - Pre-authenticated entry point called. Rejecting access
2025-08-11 15:12:52 - Securing POST /error
2025-08-11 15:12:52 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 15:12:52 - Saved request http://localhost:8080/error?continue to session
2025-08-11 15:12:52 - Pre-authenticated entry point called. Rejecting access
2025-08-11 15:15:15 - Securing OPTIONS /api/usuarios
2025-08-11 15:15:15 - Securing POST /api/usuarios
2025-08-11 15:15:15 - [JWT Filter] Método: POST Endpoint: /api/usuarios
2025-08-11 15:15:15 - No se encontró el header Authorization o no es Bearer. Request: POST /api/usuarios
2025-08-11 15:15:15 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 15:15:15 - Saved request http://localhost:8080/api/usuarios?continue to session
2025-08-11 15:15:15 - Pre-authenticated entry point called. Rejecting access
2025-08-11 15:15:15 - Securing POST /error
2025-08-11 15:15:15 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 15:15:15 - Saved request http://localhost:8080/error?continue to session
2025-08-11 15:15:15 - Pre-authenticated entry point called. Rejecting access
2025-08-11 15:15:46 - Starting MiapiApplication using Java 24.0.2 with PID 14292 (C:\Users\seba\Desktop\finalPOO\apiTickets\target\classes started by seba in C:\Users\seba\Desktop\finalPOO\apiTickets)
2025-08-11 15:15:46 - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-08-11 15:15:46 - The following 1 profile is active: "mysql"
2025-08-11 15:15:48 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-11 15:15:49 - Finished Spring Data repository scanning in 94 ms. Found 9 JPA repository interfaces.
2025-08-11 15:15:50 - Tomcat initialized with port 8080 (http)
2025-08-11 15:15:50 - Starting service [Tomcat]
2025-08-11 15:15:50 - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-08-11 15:15:50 - Initializing Spring embedded WebApplicationContext
2025-08-11 15:15:50 - Root WebApplicationContext: initialization completed in 3727 ms
2025-08-11 15:15:51 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-11 15:15:51 - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-08-11 15:15:51 - HHH000026: Second-level cache disabled
2025-08-11 15:15:52 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-11 15:15:52 - HikariPool-1 - Starting...
2025-08-11 15:15:53 - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@45b08b17
2025-08-11 15:15:53 - HikariPool-1 - Start completed.
2025-08-11 15:15:53 - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-11 15:15:53 - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-11 15:15:53 - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-11 15:15:54 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-11 15:15:55 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-11 15:15:56 - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-11 15:15:56 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataInitializer' defined in file [C:\Users\seba\Desktop\finalPOO\apiTickets\target\classes\com\poo\miapi\config\DataInitializer.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'securityConfig' defined in file [C:\Users\seba\Desktop\finalPOO\apiTickets\target\classes\com\poo\miapi\config\SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'com.poo.miapi.security.JwtAuthenticationFilter' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-08-11 15:15:56 - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-11 15:15:56 - HikariPool-1 - Shutdown initiated...
2025-08-11 15:15:56 - HikariPool-1 - Shutdown completed.
2025-08-11 15:15:56 - Stopping service [Tomcat]
2025-08-11 15:15:56 - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-08-11 15:15:56 - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in com.poo.miapi.config.SecurityConfig required a bean of type 'com.poo.miapi.security.JwtAuthenticationFilter' that could not be found.


Action:

Consider defining a bean of type 'com.poo.miapi.security.JwtAuthenticationFilter' in your configuration.

2025-08-11 15:25:31 - Starting MiapiApplication using Java 24.0.2 with PID 16888 (C:\Users\seba\Desktop\finalPOO\apiTickets\target\classes started by seba in C:\Users\seba\Desktop\finalPOO\apiTickets)
2025-08-11 15:25:31 - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-08-11 15:25:31 - The following 1 profile is active: "mysql"
2025-08-11 15:25:33 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-11 15:25:33 - Finished Spring Data repository scanning in 129 ms. Found 9 JPA repository interfaces.
2025-08-11 15:25:35 - Tomcat initialized with port 8080 (http)
2025-08-11 15:25:35 - Starting service [Tomcat]
2025-08-11 15:25:35 - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-08-11 15:25:35 - Initializing Spring embedded WebApplicationContext
2025-08-11 15:25:35 - Root WebApplicationContext: initialization completed in 3911 ms
2025-08-11 15:25:35 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-11 15:25:36 - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-08-11 15:25:36 - HHH000026: Second-level cache disabled
2025-08-11 15:25:37 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-11 15:25:37 - HikariPool-1 - Starting...
2025-08-11 15:25:37 - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@582c1f8d
2025-08-11 15:25:37 - HikariPool-1 - Start completed.
2025-08-11 15:25:37 - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-11 15:25:37 - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-11 15:25:37 - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-11 15:25:40 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-11 15:25:40 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-11 15:25:41 - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-11 15:25:41 - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataInitializer' defined in file [C:\Users\seba\Desktop\finalPOO\apiTickets\target\classes\com\poo\miapi\config\DataInitializer.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'securityConfig' defined in file [C:\Users\seba\Desktop\finalPOO\apiTickets\target\classes\com\poo\miapi\config\SecurityConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'com.poo.miapi.security.JwtAuthenticationFilter' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-08-11 15:25:41 - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-11 15:25:41 - HikariPool-1 - Shutdown initiated...
2025-08-11 15:25:41 - HikariPool-1 - Shutdown completed.
2025-08-11 15:25:41 - Stopping service [Tomcat]
2025-08-11 15:25:41 - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-08-11 15:25:41 - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in com.poo.miapi.config.SecurityConfig required a bean of type 'com.poo.miapi.security.JwtAuthenticationFilter' that could not be found.


Action:

Consider defining a bean of type 'com.poo.miapi.security.JwtAuthenticationFilter' in your configuration.

2025-08-11 15:26:28 - Starting MiapiApplication using Java 24.0.2 with PID 8004 (C:\Users\seba\Desktop\finalPOO\apiTickets\target\classes started by seba in C:\Users\seba\Desktop\finalPOO\apiTickets)
2025-08-11 15:26:28 - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-08-11 15:26:28 - The following 1 profile is active: "mysql"
2025-08-11 15:26:30 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-11 15:26:31 - Finished Spring Data repository scanning in 258 ms. Found 9 JPA repository interfaces.
2025-08-11 15:26:32 - Tomcat initialized with port 8080 (http)
2025-08-11 15:26:32 - Starting service [Tomcat]
2025-08-11 15:26:32 - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-08-11 15:26:33 - Initializing Spring embedded WebApplicationContext
2025-08-11 15:26:33 - Root WebApplicationContext: initialization completed in 4493 ms
2025-08-11 15:26:33 - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-11 15:26:34 - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-08-11 15:26:34 - HHH000026: Second-level cache disabled
2025-08-11 15:26:34 - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-11 15:26:34 - HikariPool-1 - Starting...
2025-08-11 15:26:35 - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@15bb8ed5
2025-08-11 15:26:35 - HikariPool-1 - Start completed.
2025-08-11 15:26:35 - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-11 15:26:35 - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-08-11 15:26:35 - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-11 15:26:37 - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-11 15:26:37 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-11 15:26:38 - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-11 15:26:38 - Filter 'jwtAuthenticationFilter' configured for use
2025-08-11 15:26:39 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-11 15:26:39 - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-08-11 15:26:40 - Exposing 14 endpoints beneath base path '/actuator'
2025-08-11 15:26:40 - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-11 15:26:41 - Tomcat started on port 8080 (http) with context path '/'
2025-08-11 15:26:41 - Started MiapiApplication in 13.188 seconds (process running for 14.016)
2025-08-11 15:26:41 - [DataInitializer] Inicio de configuración inicial de datos
2025-08-11 15:26:41 - [DataInitializer] Verificando si existe SuperAdmin
2025-08-11 15:26:41 - [DataInitializer] SuperAdmin ya existe
2025-08-11 15:26:41 - [DataInitializer] Verificando si existe Admin
2025-08-11 15:26:41 - [DataInitializer] Admin ya existe
2025-08-11 15:26:41 - [DataInitializer] Verificando si existe Tecnico
2025-08-11 15:26:41 - [DataInitializer] Tecnico ya existe
2025-08-11 15:26:41 - [DataInitializer] Verificando si existe Trabajador
2025-08-11 15:26:41 - [DataInitializer] Trabajador ya existe
2025-08-11 15:26:41 - [DataInitializer] Usuarios totales: 4
2025-08-11 15:26:41 - [DataInitializer] Configuración inicial completada
2025-08-11 15:26:43 - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-11 15:26:43 - Initializing Servlet 'dispatcherServlet'
2025-08-11 15:26:43 - Completed initialization in 1 ms
2025-08-11 15:26:54 - Securing OPTIONS /api/tickets
2025-08-11 15:26:55 - Securing POST /api/tickets
2025-08-11 15:26:55 - [JWT Filter] Método: POST Endpoint: /api/tickets
2025-08-11 15:26:55 - No se encontró el header Authorization o no es Bearer. Request: POST /api/tickets
2025-08-11 15:26:55 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 15:27:48 - Securing OPTIONS /api/tickets
2025-08-11 15:27:48 - Securing POST /api/tickets
2025-08-11 15:27:48 - [JWT Filter] Método: POST Endpoint: /api/tickets
2025-08-11 15:27:48 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0cmFiYWphZG9yQHNpc3RlbWEuY29tIiwiaWQiOjQsInJvbCI6IlRSQUJBSkFET1IiLCJpYXQiOjE3NTQ5MzQ2NDEsImV4cCI6MTc1NDk3MDY0MX0.24LhAiT1PjaVdSRq1aMC0VzQ9qXfhmMUvV7ioYTu78w
2025-08-11 15:27:48 - Email extraído del token: trabajador@sistema.com
2025-08-11 15:27:48 - Authentication actual en SecurityContext: null
2025-08-11 15:27:49 - [JWT Filter] Usuario autenticado: trabajador@sistema.com Rol: TRABAJADOR
2025-08-11 15:27:49 - Token válido para usuario: trabajador@sistema.com
2025-08-11 15:27:49 - Secured POST /api/tickets
2025-08-11 15:27:49 - [TicketController] POST /api/tickets datos: com.poo.miapi.dto.ticket.TicketRequestDto@11e9330d
2025-08-11 15:30:00 - Securing OPTIONS /api/trabajador/tickets
2025-08-11 15:30:00 - Securing POST /api/trabajador/tickets
2025-08-11 15:30:00 - [JWT Filter] Método: POST Endpoint: /api/trabajador/tickets
2025-08-11 15:30:01 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0cmFiYWphZG9yQHNpc3RlbWEuY29tIiwiaWQiOjQsInJvbCI6IlRSQUJBSkFET1IiLCJpYXQiOjE3NTQ5MzQ2NDEsImV4cCI6MTc1NDk3MDY0MX0.24LhAiT1PjaVdSRq1aMC0VzQ9qXfhmMUvV7ioYTu78w
2025-08-11 15:30:01 - Email extraído del token: trabajador@sistema.com
2025-08-11 15:30:01 - Authentication actual en SecurityContext: null
2025-08-11 15:30:01 - [JWT Filter] Usuario autenticado: trabajador@sistema.com Rol: TRABAJADOR
2025-08-11 15:30:01 - Token válido para usuario: trabajador@sistema.com
2025-08-11 15:30:01 - Secured POST /api/trabajador/tickets
2025-08-11 15:30:01 - [TrabajadorController] POST /tickets datos: com.poo.miapi.dto.ticket.TicketRequestDto@556aaa27
2025-08-11 15:57:33 - Securing OPTIONS /api/tickets
2025-08-11 15:57:33 - Securing POST /api/tickets
2025-08-11 15:57:33 - [JWT Filter] Método: POST Endpoint: /api/tickets
2025-08-11 15:57:33 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0cmFiYWphZG9yQHNpc3RlbWEuY29tIiwiaWQiOjQsInJvbCI6IlRSQUJBSkFET1IiLCJpYXQiOjE3NTQ5MzQ2NDEsImV4cCI6MTc1NDk3MDY0MX0.24LhAiT1PjaVdSRq1aMC0VzQ9qXfhmMUvV7ioYTu78w
2025-08-11 15:57:33 - Email extraído del token: trabajador@sistema.com
2025-08-11 15:57:33 - Authentication actual en SecurityContext: null
2025-08-11 15:57:33 - [JWT Filter] Usuario autenticado: trabajador@sistema.com Rol: TRABAJADOR
2025-08-11 15:57:33 - Token válido para usuario: trabajador@sistema.com
2025-08-11 15:57:33 - Secured POST /api/tickets
2025-08-11 15:57:33 - [TicketController] POST /api/tickets datos: com.poo.miapi.dto.ticket.TicketRequestDto@1dfd4c
2025-08-11 16:08:26 - Securing OPTIONS /api/tickets
2025-08-11 16:08:26 - Securing POST /api/tickets
2025-08-11 16:08:26 - [JWT Filter] Método: POST Endpoint: /api/tickets
2025-08-11 16:08:26 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0cmFiYWphZG9yQHNpc3RlbWEuY29tIiwiaWQiOjQsInJvbCI6IlRSQUJBSkFET1IiLCJpYXQiOjE3NTQ5MzQ2NDEsImV4cCI6MTc1NDk3MDY0MX0.24LhAiT1PjaVdSRq1aMC0VzQ9qXfhmMUvV7ioYTu78w
2025-08-11 16:08:26 - Email extraído del token: trabajador@sistema.com
2025-08-11 16:08:26 - Authentication actual en SecurityContext: null
2025-08-11 16:08:26 - [JWT Filter] Usuario autenticado: trabajador@sistema.com Rol: TRABAJADOR
2025-08-11 16:08:26 - Token válido para usuario: trabajador@sistema.com
2025-08-11 16:08:26 - Secured POST /api/tickets
2025-08-11 16:08:26 - [TicketController] POST /api/tickets datos: com.poo.miapi.dto.ticket.TicketRequestDto@10d8fbbe
2025-08-11 16:09:45 - Securing OPTIONS /api/tickets
2025-08-11 16:09:45 - [JWT Filter] Método: OPTIONS Endpoint: /api/tickets
2025-08-11 16:09:45 - No se encontró el header Authorization o no es Bearer. Request: OPTIONS /api/tickets
2025-08-11 16:09:45 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 16:09:58 - Securing POST /api/tickets
2025-08-11 16:09:58 - [JWT Filter] Método: POST Endpoint: /api/tickets
2025-08-11 16:09:58 - No se encontró el header Authorization o no es Bearer. Request: POST /api/tickets
2025-08-11 16:09:58 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 16:16:53 - Securing OPTIONS /api/tickets
2025-08-11 16:16:53 - Securing POST /api/tickets
2025-08-11 16:16:53 - [JWT Filter] Método: POST Endpoint: /api/tickets
2025-08-11 16:16:53 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0cmFiYWphZG9yQHNpc3RlbWEuY29tIiwiaWQiOjQsInJvbCI6IlRSQUJBSkFET1IiLCJpYXQiOjE3NTQ5MzQ2NDEsImV4cCI6MTc1NDk3MDY0MX0.24LhAiT1PjaVdSRq1aMC0VzQ9qXfhmMUvV7ioYTu78w
2025-08-11 16:16:53 - Email extraído del token: trabajador@sistema.com
2025-08-11 16:16:53 - Authentication actual en SecurityContext: null
2025-08-11 16:16:53 - [JWT Filter] Usuario autenticado: trabajador@sistema.com Rol: TRABAJADOR
2025-08-11 16:16:53 - Token válido para usuario: trabajador@sistema.com
2025-08-11 16:16:53 - Secured POST /api/tickets
2025-08-11 16:16:53 - [TicketController] POST /api/tickets datos: com.poo.miapi.dto.ticket.TicketRequestDto@313ffbfc
2025-08-11 16:28:46 - Securing OPTIONS /api/tickets
2025-08-11 16:28:46 - Securing POST /api/tickets
2025-08-11 16:28:46 - [JWT Filter] Método: POST Endpoint: /api/tickets
2025-08-11 16:28:46 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0cmFiYWphZG9yQHNpc3RlbWEuY29tIiwiaWQiOjQsInJvbCI6IlRSQUJBSkFET1IiLCJpYXQiOjE3NTQ5MzQ2NDEsImV4cCI6MTc1NDk3MDY0MX0.24LhAiT1PjaVdSRq1aMC0VzQ9qXfhmMUvV7ioYTu78w
2025-08-11 16:28:46 - Email extraído del token: trabajador@sistema.com
2025-08-11 16:28:46 - Authentication actual en SecurityContext: null
2025-08-11 16:28:47 - [JWT Filter] Usuario autenticado: trabajador@sistema.com Rol: TRABAJADOR
2025-08-11 16:28:47 - Token válido para usuario: trabajador@sistema.com
2025-08-11 16:28:47 - Secured POST /api/tickets
2025-08-11 16:28:47 - [TicketController] POST /api/tickets datos: com.poo.miapi.dto.ticket.TicketRequestDto@20b22953
2025-08-11 16:35:24 - Securing OPTIONS /api/tickets
2025-08-11 16:35:24 - Securing POST /api/tickets
2025-08-11 16:35:24 - [JWT Filter] Método: POST Endpoint: /api/tickets
2025-08-11 16:35:24 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0cmFiYWphZG9yQHNpc3RlbWEuY29tIiwiaWQiOjQsInJvbCI6IlRSQUJBSkFET1IiLCJpYXQiOjE3NTQ5MzQ2NDEsImV4cCI6MTc1NDk3MDY0MX0.24LhAiT1PjaVdSRq1aMC0VzQ9qXfhmMUvV7ioYTu78w
2025-08-11 16:35:24 - Email extraído del token: trabajador@sistema.com
2025-08-11 16:35:24 - Authentication actual en SecurityContext: null
2025-08-11 16:35:24 - [JWT Filter] Usuario autenticado: trabajador@sistema.com Rol: TRABAJADOR
2025-08-11 16:35:24 - Token válido para usuario: trabajador@sistema.com
2025-08-11 16:35:24 - Secured POST /api/tickets
2025-08-11 16:35:25 - [TicketController] POST /api/tickets datos: com.poo.miapi.dto.ticket.TicketRequestDto@5a6f53f2
2025-08-11 16:38:28 - Securing OPTIONS /api/tickets
2025-08-11 16:38:28 - Securing POST /api/tickets
2025-08-11 16:38:28 - [JWT Filter] Método: POST Endpoint: /api/tickets
2025-08-11 16:38:28 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0cmFiYWphZG9yQHNpc3RlbWEuY29tIiwiaWQiOjQsInJvbCI6IlRSQUJBSkFET1IiLCJpYXQiOjE3NTQ5MzQ2NDEsImV4cCI6MTc1NDk3MDY0MX0.24LhAiT1PjaVdSRq1aMC0VzQ9qXfhmMUvV7ioYTu78w
2025-08-11 16:38:29 - Email extraído del token: trabajador@sistema.com
2025-08-11 16:38:29 - Authentication actual en SecurityContext: null
2025-08-11 16:38:29 - [JWT Filter] Usuario autenticado: trabajador@sistema.com Rol: TRABAJADOR
2025-08-11 16:38:29 - Token válido para usuario: trabajador@sistema.com
2025-08-11 16:38:29 - Secured POST /api/tickets
2025-08-11 16:38:29 - [TicketController] POST /api/tickets datos: com.poo.miapi.dto.ticket.TicketRequestDto@65fe85c2
2025-08-11 16:42:26 - Securing POST /api/auth/login
2025-08-11 16:42:26 - [JWT Filter] Método: POST Endpoint: /api/auth/login
2025-08-11 16:42:26 - No se encontró el header Authorization o no es Bearer. Request: POST /api/auth/login
2025-08-11 16:42:26 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 16:42:26 - Secured POST /api/auth/login
2025-08-11 16:42:28 - [AuthController] POST /login datos: com.poo.miapi.dto.auth.LoginRequestDto@33453009
2025-08-11 16:42:29 - [AuthController] Respuesta: com.poo.miapi.dto.auth.LoginResponseDto@31f5de93
2025-08-11 16:43:40 - Securing POST /api/tickets
2025-08-11 16:43:40 - [JWT Filter] Método: POST Endpoint: /api/tickets
2025-08-11 16:43:40 - No se encontró el header Authorization o no es Bearer. Request: POST /api/tickets
2025-08-11 16:43:40 - Set SecurityContextHolder to anonymous SecurityContext
2025-08-11 16:45:09 - Securing POST /api/tickets
2025-08-11 16:45:09 - [JWT Filter] Método: POST Endpoint: /api/tickets
2025-08-11 16:45:09 - JWT extraído: eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ0cmFiYWphZG9yQHNpc3RlbWEuY29tIiwiaWQiOjQsInJvbCI6IlRSQUJBSkFET1IiLCJpYXQiOjE3NTQ5NDEzNDgsImV4cCI6MTc1NDk3NzM0OH0.6bDKzGTh7hlEkFuh9SnLY1rDqcwt5CKJspMZNmd8TcU
2025-08-11 16:45:09 - Email extraído del token: trabajador@sistema.com
2025-08-11 16:45:09 - Authentication actual en SecurityContext: null
2025-08-11 16:45:09 - [JWT Filter] Usuario autenticado: trabajador@sistema.com Rol: TRABAJADOR
2025-08-11 16:45:09 - Token válido para usuario: trabajador@sistema.com
2025-08-11 16:45:09 - Secured POST /api/tickets
2025-08-11 16:45:09 - [TicketController] POST /api/tickets datos: com.poo.miapi.dto.ticket.TicketRequestDto@77876a2
